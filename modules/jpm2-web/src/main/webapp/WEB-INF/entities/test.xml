<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>
    
    <!--
    http://static.springsource.org/spring/docs/2.5.6/reference/extensible-xml.html
    -->
    <bean id="jpm-dao-test" class="jpaoletti.jpm2.core.test.JPMTestDAO" >
        <property name="transformer" ref="transformer-strToLong" />
    </bean>
    
    <bean id="jpm-entity-test" class="jpaoletti.jpm2.core.model.Entity" >
        <property name="clazz" value="jpaoletti.jpm2.core.test.JPMTest" />
        <property name="dao" ref="jpm-dao-test" />
        <property name="order" value="id string integer bool" />
        <property name="operations" >
            <list>
                <bean class="jpaoletti.jpm2.core.model.Operation">
                    <property name="id" value="list" />
                    <property name="enabled" value="true" />
                    <property name="scope" value="general" />
                    <property name="display" value="all" />
                    <property name="showTitle" value="true" />
                    <property name="confirm" value="false" />
                    <property name="perm" value="sysadmin" />
                    <property name="available" value="true" />
                    <property name="compact" value="false" />
                    <property name="popup" value="false" />
                    <property name="navigable" value="true" />
                    <!-- <property name="follows" value="otheroper" />-->
                    <!--<property name="condition">
                        <bean class="some.OperationCondition">
                            ...
                        </bean>
                    </property>-->
                    <!--<property name="context">
                        <bean class="some.OperationContext" />
                    </property>-->
                    <!--<property name="validators">
                        <list>
                            ...
                        </list>
                    </property>-->
                    <property name="properties">
                        <props>
                            <prop key="show-row-number">true</prop>
                            <prop key="paginable">true</prop>
                        </props>
                    </property>
                </bean>
                <bean class="jpaoletti.jpm2.core.model.Operation">
                    <property name="id" value="show" />
                    <property name="display" value="edit list" />
                </bean>
                <bean class="jpaoletti.jpm2.core.model.Operation">
                    <property name="id" value="add" />
                    <property name="scope" value="general" />
                    <property name="context">
                        <bean class="jpaoletti.jpm2.core.test.JPMTestOperationContext" />
                    </property>
                </bean>
                <bean class="jpaoletti.jpm2.core.model.Operation">
                    <property name="id" value="edit" />
                    <property name="display" value="show list" />
                </bean>
                <bean class="jpaoletti.jpm2.core.model.Operation">
                    <property name="id" value="delete" />
                    <property name="confirm" value="true" />
                    <property name="display" value="edit show list" />
                </bean>
            </list>
        </property>
        <property name="fields" >
            <list>
                <bean class="jpaoletti.jpm2.core.model.Field">
                    <property name="id" value="id" />
                    <property name="configs" ref="default-id-field-config" />
                    <property name="width" value="55px" />
                </bean>
                <bean class="jpaoletti.jpm2.core.model.Field">
                    <property name="id" value="string" />
                    <property name="searcher" ref="jpm-searcher-string" />
                    <property name="configs" ref="default-string-config" />
                </bean>
                <bean class="jpaoletti.jpm2.core.model.Field">
                    <property name="id" value="integer" />
                    <property name="align" value="right" />
                    <property name="searcher" ref="jpm-seracher-int"/>
                    <property name="width" value="55px" />
                    <property name="configs">
                        <list>
                            <bean class="jpaoletti.jpm2.core.model.FieldConfig">
                                <property name="operations" value="list show"/>
                                <property name="converter" ref="jpm-converter-show"/>
                            </bean>
                            <bean class="jpaoletti.jpm2.core.model.FieldConfig">
                                <property name="operations" value="add edit"/>
                                <property name="converter" ref="jpm-converter-edit-int"/>
                                <property name="validator">
                                    <bean class="jpaoletti.jpm2.core.validator.IntegerMax">
                                        <property name="max" value="200" />
                                    </bean>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean class="jpaoletti.jpm2.core.model.Field">
                    <property name="id" value="date" />
                    <property name="width" value="100px" />
                    <property name="configs" ref="default-date-config" />
                </bean>
                <bean class="jpaoletti.jpm2.core.model.Field">
                    <property name="id" value="bool" />
                    <property name="searcher" ref="jpm-searcher-bool" />
                    <property name="width" value="55px" />
                    <property name="align" value="center" />
                    <property name="configs" ref="default-bool-config" />
                </bean>
                <bean class="jpaoletti.jpm2.core.model.Field">
                    <property name="id" value="test" />
                    <property name="width" value="55px" />
                    <property name="configs">
                        <list>
                            <bean class="jpaoletti.jpm2.core.model.FieldConfig">
                                <property name="operations" value="list show"/>
                                <property name="converter" ref="jpm-converter-show"/>
                            </bean>
                            <bean class="jpaoletti.jpm2.core.model.FieldConfig">
                                <property name="operations" value="add edit"/>
                                <property name="converter">
                                    <bean class="jpaoletti.jpm2.web.converter.WebEditObject">
                                        <property name="entity" ref="jpm-entity-test" />
                                        <property name="textField" value="string" />
                                    </bean>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean class="jpaoletti.jpm2.core.model.Field">
                    <property name="id" value="tests" />
                    <property name="configs">
                        <list>
                            <bean class="jpaoletti.jpm2.core.model.FieldConfig">
                                <property name="operations" value="show"/>
                                <property name="converter" ref="jpm-converter-show"/>
                            </bean>
                            <bean class="jpaoletti.jpm2.core.model.FieldConfig">
                                <property name="operations" value="add edit"/>
                                <property name="converter">
                                    <bean class="jpaoletti.jpm2.web.converter.WebEditCollection">
                                        <property name="entity" ref="jpm-entity-test" />
                                        <property name="baseEntity" ref="jpm-entity-test" />
                                        <property name="textField" value="string" />
                                    </bean>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
        <property name="panels">
            <list>
                <bean class="jpaoletti.jpm2.core.model.PanelRow">
                    <property name="panels">
                        <list>
                            <bean class="jpaoletti.jpm2.core.model.Panel">
                                <property name="icon" value="glyphicon-bell" />
                                <property name="title" value="jpm.jpm-entity-test.panel1" />
                                <property name="blocks" value="4" />
                                <property name="fields" value="id string test" />
                            </bean>
                            <bean class="jpaoletti.jpm2.core.model.Panel">
                                <property name="icon" value="glyphicon-briefcase" />
                                <property name="title" value="jpm.jpm-entity-test.panel2" />
                                <property name="blocks" value="4" />
                                <property name="fields" value="integer date bool" />
                            </bean>
                            <bean class="jpaoletti.jpm2.core.model.Panel">
                                <property name="icon" value="glyphicon-cog" />
                                <property name="title" value="Another Test" />
                                <property name="blocks" value="4" />
                                <property name="fields" value="tests" />
                            </bean>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>
</beans>